# WARNING: This file is generated, do not edit! Edit _templates/action.yml.erb instead.

name: "Snyk<% if @variant != "Node"%> <%= @name %><% if @ident %> (<%= @ident %>)<% end %><% end %>"
description: "Check your <%= @variant == "Node" && @is_root ? "applications" : "#{@name} application" %> for vulnerabilities using Snyk"
author: "Snyk Ltd"
branding:
  icon: "alert-triangle"
  color: "yellow"
inputs:
  command:
    description: "Which Snyk command to run, defaults to test"
    default: test
  args:
    description: "Additional arguments to pass to Snyk"
  json:
    description: "Output a snyk.json file with results if running the test command"
    default: false
runs:<% if @is_deprecated %>
  using: "composite"
  steps:
    - name: Show deprecation warning
      shell: bash
      run: |
        echo "::warning title=Deprecated Action::This Snyk action is deprecated. Please visit Snyk actions at https://github.com/snyk/actions for a newer version."
    
    - name: Run Snyk scan
      uses: docker://snyk/snyk:<%= @variant.downcase %>
      env:
        FORCE_COLOR: 2
        SNYK_INTEGRATION_NAME: GITHUB_ACTIONS
        SNYK_INTEGRATION_VERSION: <%= @variant.downcase %>
      with:
        args: snyk ${{ inputs.command }} ${{ inputs.args }}<% else %>
  using: "docker"
  image: "docker://snyk/snyk:<%= @variant.downcase %>"
  env:
    FORCE_COLOR: 2
    SNYK_INTEGRATION_NAME: GITHUB_ACTIONS
    SNYK_INTEGRATION_VERSION: <%= @variant.downcase %>
  args:
  - snyk
  - ${{ inputs.command }}
  - ${{ inputs.args }}<% end %>
